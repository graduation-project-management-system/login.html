<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Change New Team</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

    body {
        background: #f4f7fc;
        height: 100vh;      
        overflow: hidden;    
        display: flex;
        flex-direction: column;
    }

    /* ================= HEADER ================= */
    header {
        background: #ffffff;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        z-index: 1001;
    }

    .logo { display: flex; align-items: center; gap: 8px; color: #1a237e; font-size: 18px; font-weight: 600; }

    .profile { display: flex; align-items: center; gap: 12px; position: relative; }
    .notification, .messages-btn { position: relative; font-size: 16px; color: #1a237e; cursor: pointer; }
    .notification .dot, .messages-btn .dot { position: absolute; top: -4px; right: -4px; width: 8px; height: 8px; background: red; border-radius: 50%; }

    .profile-btn { display: flex; align-items: center; gap: 6px; cursor: pointer; color: #1e293b; font-weight: 500; font-size: 14px; }

    .dropdown {
        position: absolute; top: 40px; right: 0; width: 200px; background: #fff;
        border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.12); display: none; overflow: hidden; z-index: 1000;
    }
    .dropdown a { display: flex; align-items: center; gap: 10px; padding: 12px 15px; text-decoration: none; color: #64748b; font-weight: 500; font-size: 13px; }
    .dropdown a:hover { background: #f1f5f9; }

    /* ================= MAIN ================= */
    main { flex: 1; padding: 15px 20px; overflow: hidden; display: flex; flex-direction: column; }
    h1 { font-size: 22px; margin-bottom: 8px; color: #1a237e; font-weight: 700; }
    .subtitle { color: #374151; margin-bottom: 15px; font-size: 14px; font-weight: 500; line-height: 1.4; max-width: 600px; }

    .grid { display: flex; gap: 15px; align-items: stretch; flex: 1; min-height: 0; }
    .left-column { flex: 1.2; display: flex; flex-direction: column; gap: 10px; }

    .card { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); }

    /* Admin */
    .admin { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
    .admin-icon { width: 45px; height: 45px; background: #e7f0ff; color: #1a237e; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; }
    .badge { background: #e7f0ff; color: #1a237e; padding: 3px 8px; border-radius: 20px; font-size: 10px; }

    /* Form Fields */
    label { font-weight: 600; display: block; margin-bottom: 4px; font-size: 13px; }
    input, textarea { 
        width: 100%; 
        padding: 8px; 
        border-radius: 6px; 
        border: 1px solid #ddd; 
        margin-bottom: 10px; 
        font-size: 13px; 
        display: block; 
    }
    textarea { resize: none; height: 60px; }
    .primary-btn { width: 100%; background: #1a237e; color: #fff; padding: 10px; border: none; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: 600; }

    /* Supervisor Card - Modified for Visibility */
    .card.supervisor { 
        padding: 0 0 10px 0; 
        text-align: center; 
        display: flex; 
        flex-direction: column; 
        align-items: center;
        justify-content: flex-start;
        gap: 2px; 
    }
    .supervisor-img-container { width: 100%; height: 80px; overflow: hidden; margin-top: -2px; }
    .supervisor-img-container img { 
        width: 100%; height: 100%; object-fit: contain; 
        mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
        -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
    }

    .green-btn {
        background: #28a745 !important;
        color: #ffffff !important;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        width: 85%;
        margin-top: 5px;
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        transition: 0.3s;
    }
    .green-btn:hover { background: #218838 !important; transform: translateY(-2px); }

    /* Chat Section */
    .chat-column { flex: 1; display: none; flex-direction: column; height: auto; }
    .chat-card { background: #fff; padding: 15px; border-radius: 10px; height: 100%; display: flex; flex-direction: column; box-shadow: 0 8px 20px rgba(0,0,0,0.05); }
    .chat-box-content { flex: 1; overflow-y: auto; border: 1px solid #eee; border-radius: 6px; padding: 10px; color: #64748b; font-size: 13px; margin-bottom: 10px; }
    .chat-input { display: flex; gap: 8px; align-items: center; }
    .chat-input input { margin-bottom: 0; flex: 1; }
    .send-btn { background: #1a237e; color: #fff; border: none; padding: 10px 15px; border-radius: 6px; font-size: 13px; cursor: pointer; height: 38px; }

    #notifBox {
        display: none;
        position: absolute; top: 45px; right: 0; width: 250px;
        background: white; border: 1px solid #ddd;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border-radius: 8px; z-index: 2000; padding: 10px; font-size: 12px;
    }

    @media (max-width: 900px) { .grid { flex-direction: column; overflow-y: auto; } body { overflow: auto; } }
</style>
</head>

<body>

<header>
    <div class="logo"><i class="fa-solid fa-paper-plane"></i> GRADUATION PROJECT</div>
    <div class="profile">
        <div class="notification" id="notifBtn">
            <i class="fa-regular fa-bell"></i>
            <span class="dot" id="notifBadge"></span> 
            <div id="notifBox">
                <p style="font-weight: bold; border-bottom: 1px solid #eee; margin-bottom: 5px;">Notifications</p>
                <div id="notifContent" style="color: #555;">
                    <i class="fa-solid fa-circle-check" style="color: green;"></i> 
                    New login detected for <span id="notifUser"></span>!
                </div>
            </div>
        </div>

        <div class="messages-btn" onclick="toggleChat()">
            <i class="fa-solid fa-envelope"></i>
            <span class="dot"></span>
        </div>

        <div class="profile-btn" id="userDropdownBtn">
            <i class="fa-solid fa-circle-user"></i>
            <span id="userNameHeader">User</span>
            <i class="fa-solid fa-chevron-down"></i>
        </div>

        <div class="dropdown" id="menu">
            <a href="#"><i class="fa-solid fa-users"></i> My Team</a>
            <a href="#"><i class="fa-solid fa-file-lines"></i> Submissions</a>
            <a href="#"><i class="fa-solid fa-rotate"></i> Change Team</a>
            <a href="#" id="logoutBtn" style="color: #d32f2f; border-top: 1px solid #eee;">
                <i class="fa-solid fa-right-from-bracket"></i> Log Out
            </a>
        </div>
    </div>
</header>

<main>
    <h1>Change New Team</h1>
    <p class="subtitle">
        You are setting up a new team for your graduation project.<br>
        As the team creator, you are the admin and leader by default.
    </p>

    <div class="grid">
        <div class="left-column">
            <div class="card">
                <div class="admin">
                    <div class="admin-icon"><i class="fa-solid fa-graduation-cap"></i></div>
                    <div><strong id="userNameCard">User Name</strong> <br><span class="badge">Team Admin</span></div>
                </div>
                <label>Team Name</label>
                <input type="text" value="My Graduation Team">
                <label>Team Description</label>
                <textarea placeholder="A description about the team..."></textarea>
                <button class="primary-btn"><i class="fa-solid fa-paper-plane"></i> Change Team</button>
            </div>

            <div class="card supervisor">
                <div class="supervisor-img-container">
                    <img src="https://i.postimg.cc/ZYsHvQ9Q/ggggggggggggg.jpg" alt="Supervisor">
                </div>
                <h3>Request Supervisor</h3>
                <p style="font-size: 12px; color: #64748b;">Choose your project mentor</p>
                <button class="green-btn">
                    <i class="fa-solid fa-paper-plane"></i> Request Now
                </button>
            </div>
        </div>

        <div class="chat-column" id="chatColumn">
            <div class="chat-card">
                <h3>Team Chat</h3>
                <div class="chat-box-content">Welcome! Start messaging your team members here once they join.</div>
                <div class="chat-input">
                    <input type="text" placeholder="Type a message...">
                    <button class="send-btn">Send</button>
                </div>
            </div>
        </div>
    </div> 
</main>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const savedName = localStorage.getItem('userDisplayName');
        const nBtn = document.getElementById('notifBtn');
        const nBox = document.getElementById('notifBox');
        const nBadge = document.getElementById('notifBadge');
        const nUser = document.getElementById('notifUser');
        const userDropdownBtn = document.getElementById('userDropdownBtn');
        const menu = document.getElementById('menu');

        if (savedName) {
            if (document.getElementById('userNameHeader')) document.getElementById('userNameHeader').textContent = savedName;
            if (document.getElementById('userNameCard')) document.getElementById('userNameCard').textContent = savedName;
            if (nUser) nUser.textContent = savedName;
            if (nBadge) nBadge.style.display = 'block';
        }

        if (nBtn) {
            nBtn.onclick = (e) => {
                e.stopPropagation();
                const isVisible = nBox.style.display === 'block';
                nBox.style.display = isVisible ? 'none' : 'block';
                menu.style.display = 'none';
                if (!isVisible && nBadge) nBadge.style.display = 'none';
            };
        }

        if (userDropdownBtn) {
            userDropdownBtn.onclick = (e) => {
                e.stopPropagation();
                const isVisible = menu.style.display === 'block';
                menu.style.display = isVisible ? 'none' : 'block';
                nBox.style.display = 'none';
            };
        }

        window.addEventListener("click", function() {
            if (nBox) nBox.style.display = 'none';
            if (menu) menu.style.display = 'none';
        });

        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.onclick = (e) => {
                e.preventDefault();
                localStorage.clear();
                window.location.href = "login.html"; 
            };
        }
    });

    function toggleChat() {
        const chatCol = document.getElementById("chatColumn");
        chatCol.style.display = (chatCol.style.display === "flex") ? "none" : "flex";
    }
</script>
</body>
</html>